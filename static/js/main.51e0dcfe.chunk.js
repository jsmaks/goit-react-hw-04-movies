(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[0],{29:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(23),s=n.n(a),i=(n(29),n(2)),o="/",u="/movies",h="/movies/:movieId",l=n(3),j=n.n(l),v=n(5),p=n(8),b=n(9),d=n(12),f=n(11),m=n(13),O=n(0),x=Object(i.f)((function(e){var t=e.movies;e.match,e.location;return Object(O.jsx)("ul",{children:t.length>0&&t.map((function(e){var t=e.id,n=e.title,r=e.original_name;return Object(O.jsx)("li",{children:Object(O.jsx)(m.b,{to:"/movies/".concat(t),children:n||r})},t)}))})})),y="ed4770d472da6341d2e53ccb9e288320",g="https://api.themoviedb.org/3/",w="https://image.tmdb.org/t/p/w500/",k=new(function(){function e(t){Object(p.a)(this,e),this.searchQuery="",this.page=1}return Object(b.a)(e,[{key:"fetchResults",value:function(){var e=Object(v.a)(j.a.mark((function e(){var t,n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(g,"trending/all/day?api_key=").concat(y,"&page=").concat(this.page),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,c=r.results,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchSearch",value:function(){var e=Object(v.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(g,"search/movie?api_key=").concat(y,"&page=").concat(this.page,"&query=").concat(t),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMovie",value:function(){var e=Object(v.a)(j.a.mark((function e(t){var n,r,c,a,s,i,o,u,h,l,v;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(g,"movie/").concat(t,"?api_key=").concat(y),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,console.log(c),a=c.title,s=c.overview,i=c.vote_average,o=c.genres,u=c.poster_path,h=c.release_date,l=c.original_name,v={title:a||l,score:10*i,overview:s,genres:o.flatMap((function(e){return e.name})).join(" "),img:"".concat(w).concat(u),year:h.split("-")[0]},e.abrupt("return",v);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCredits",value:function(){var e=Object(v.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(g,"movie/").concat(t,"/credits?api_key=").concat(y,"&language=en-US"),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,console.log(c),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchReviews",value:function(){var e=Object(v.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(g,"movie/").concat(t,"/reviews?api_key=").concat(y),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),S=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={movies:[]},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.fetchResults();case 2:t=e.sent,console.log(t),this.setState((function(){return{movies:t}}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.movies;return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Trending movie"}),e.length>0&&Object(O.jsx)(x,{movies:e})]})}}]),n}(r.Component),C=n(16),I=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={searchQuery:"",movies:[],query:""},e.onChangeQuery=function(t){e.setState({searchQuery:t,currentPage:1,error:null})},e.handleSubmit=function(t){t.preventDefault();var n=e.state.query;e.onChangeQuery(n)},e.handleChange=function(t){var n=t.currentTarget,r=n.name,c=n.value;e.setState(Object(C.a)({},r,c))},e.reset=function(){e.setState({name:""})},e}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e,t){t.searchQuery!==this.state.searchQuery&&this.fetchMovie()}},{key:"fetchMovie",value:function(){var e=Object(v.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.searchQuery,e.next=3,k.fetchSearch(t);case 3:n=e.sent,this.setState({movies:n.results});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.movies,n=e.query;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{children:"MoviesPage"}),Object(O.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(O.jsx)("input",{name:"query",className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search films",value:n,onChange:this.handleChange}),Object(O.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(O.jsx)("span",{className:"SearchForm-button-label",children:"Search"})})]}),Object(O.jsx)(x,{movies:t})]})}}]),n}(r.Component),_=n(22),N=function(e){var t=e.title,n=e.score,r=e.overview,c=e.genres,a=e.urlImg,s=e.year;return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:Object(O.jsx)("img",{src:a,alt:"Poster ".concat(t)})}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("h2",{children:[t,"(",s,")"]}),Object(O.jsxs)("span",{children:["User Score : ",n,"%"]}),Object(O.jsx)("h3",{children:"Overview"}),Object(O.jsx)("p",{children:r}),Object(O.jsx)("h3",{children:"Genres"}),Object(O.jsx)("p",{children:c})]})]})},M=n(17),F=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={cast:[]},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.props.movieId),e.next=3,k.fetchCredits("460465");case 3:t=e.sent,console.log(t),this.setState({cast:Object(M.a)(t.cast)});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.cast;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("ul",{children:e&&e.map((function(e){return Object(O.jsx)("li",{children:e.original_name},e.original_name)}))})})}}]),n}(r.Component),Q=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={reviews:[]},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.props),e.next=3,k.fetchReviews(this.props.movieId);case 3:t=e.sent,this.setState({reviews:Object(M.a)(t)});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsxs)(O.Fragment,{children:[0===this.state.reviews.length&&Object(O.jsx)("h3",{children:"We don't have any reviews for this movie"}),this.state.reviews.length>0&&Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Reviews"}),Object(O.jsx)("ul",{children:this.state.reviews.map((function(e){return Object(O.jsxs)("li",{children:[Object(O.jsxs)("p",{children:["Author: ",e.author]}),Object(O.jsx)("p",{children:e.content})]},e.id)}))})]})]})}}]),n}(r.Component),A=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={title:null,score:null,overview:null,genres:[],img:null,year:null,movieId:1},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.movieId,e.next=3,k.fetchMovie(t);case 3:n=e.sent,this.setState(Object(_.a)(Object(_.a)({},n),{},{movieId:t}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log(this.props.match),Object(O.jsxs)("div",{children:[Object(O.jsx)(N,{title:this.state.title,overview:this.state.overview,score:this.state.score,genres:this.state.genres,urlImg:this.state.img,year:this.state.year}),Object(O.jsx)("h2",{children:"Additional information"}),Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(m.c,{to:"".concat(this.props.match.url,"/cast"),children:"Cast"})}),Object(O.jsx)("li",{children:Object(O.jsx)(m.c,{to:"".concat(this.props.match.url,"/reviews"),children:"Reviews"})})]}),Object(O.jsx)(i.a,{exact:!0,path:"".concat(this.props.match.url,"/cast"),render:function(t){return e.state.movieId&&Object(O.jsx)(F,{movieId:e.state.movieId})}}),Object(O.jsx)(i.a,{exact:!0,path:"".concat(this.props.match.url,"/reviews"),render:function(t){return e.state.movieId&&Object(O.jsx)(Q,{movieId:e.state.movieId})}})]})}}]),n}(r.Component),D=function(){return Object(O.jsx)("nav",{children:Object(O.jsxs)("ul",{className:"header__nav",children:[Object(O.jsx)("li",{children:Object(O.jsx)(m.c,{exact:!0,className:"NavLink",activeClassName:"NavLink--active",to:"/",children:"Home"})}),Object(O.jsx)("li",{children:Object(O.jsx)(m.c,{className:"NavLink",activeClassName:"NavLink--active",to:"/movies",children:"Movies"})})]})})},R=function(){return Object(O.jsx)("h1",{children:"\u041d\u0438\u0447\u0435\u0433\u041e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})};var q=function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(D,{}),Object(O.jsxs)(i.c,{children:[Object(O.jsx)(i.a,{exact:!0,path:o,component:S}),Object(O.jsx)(i.a,{exact:!0,path:h,component:A}),Object(O.jsx)(i.a,{exact:!0,path:u,component:I}),Object(O.jsx)(i.a,{component:R})]})]})};n(40);s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(m.a,{children:Object(O.jsx)(q,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.51e0dcfe.chunk.js.map